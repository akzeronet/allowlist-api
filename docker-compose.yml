services:
  allowlist:
    build: .
    container_name: allowlist-api
    ports: ["8080:8080"]
    environment:
      # 🔐 Seguridad
      API_KEY: "pon-aqui-una-clave-larga-y-aleatoria"
      API_KEY_OLD: ""
      ENC_KEY: ""
      ENC_KEY_OLD: ""

      # 🌐 CORS
      CORS_ORIGINS: ""

      # 🛃 Dominio opcional
      VALIDATE_DOMAIN: ""

      # 🕒 DB + TZ
      DB_PATH: "/app/data/data.db"
      TZ: "America/Santo_Domingo"

      # ⚙️ Modo
      APP_MODE: "1"

      # 📖 Docs
      DOCS_ENABLED: "true"
      DOCS_RELAX: "true"     # en prod pon "false" recomendado

      # 🔑 NUEVO: multi-keys (scopes) y HMAC
      USE_MULTI_KEYS: "true" # default ya es true; lo dejo explícito
      HMAC_SECRET: ""        # pon un secreto para firmar con HMAC si lo vas a usar
    volumes:
      - ./data:/app/data
    restart: unless-stopped
