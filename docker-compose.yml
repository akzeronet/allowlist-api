services:
  allowlist:
    build: .
    container_name: allowlist-api
    ports:
      - "8080:8080"
    environment:
      # 🔐 seguridad
      API_KEY: "pon-aqui-una-clave-larga-y-aleatoria"
      API_KEY_OLD: ""       # opcional (rotación)
      ENC_KEY: ""           # openssl rand -hex 32  (ACTIVA cifrado)
      ENC_KEY_OLD: ""       # opcional (rotación de cifrado)
      # 🌐 CORS: separa por comas si quieres restringir (https://tu-n8n.com,https://otro.origen.com)
      CORS_ORIGINS: ""
      # 🛃 Validación por dominio (opcional), ej: empresa.com
      VALIDATE_DOMAIN: ""
      # 🕒
      DB_PATH: "/app/data/data.db"
      TZ: "America/Santo_Domingo"
      # Modo: 1=production, 2=development (o usa NODE_ENV directo si prefieres)
      APP_MODE: "1"
    volumes:
      - ./data:/app/data
    restart: unless-stopped
